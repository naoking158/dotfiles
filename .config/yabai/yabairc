#!/usr/bin/env sh

# the scripting-addition must be loaded manually if
# you are running yabai on macOS Big Sur. Uncomment
# the following line to have the injection performed
# when the config is executed during startup.
#
# for this to work you must configure sudo such that
# it will be able to run the command without password
#
# see this wiki page for information:
#  - https://github.com/koekeishiya/yabai/wiki/Installing-yabai-(latest-release)
#
sudo yabai --load-sa
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"

# bsp or float (default: bsp)
yabai -m config layout bsp

# New window spawns to the right if vertical split, or bottom if horizontal split
yabai -m config window_placement second_child

# Set all padding and gaps to 5pt (default: 0)
<<<<<<< HEAD
yabai -m config top_padding    3
yabai -m config bottom_padding 3
yabai -m config left_padding   3
yabai -m config right_padding  3
=======
yabai -m config top_padding    0
yabai -m config bottom_padding 0
yabai -m config left_padding   0
yabai -m config right_padding  0
>>>>>>> dev
yabai -m config window_gap     3

# on or off (default: off)
yabai -m config auto_balance off

# Floating point value between 0 and 1 (default: 0.5)
yabai -m config split_ratio 0.5

# floating windows are always on top (default: off)
yabai -m config window_topmost off

# modify window shadows (default: on, options: on, off, float)
yabai -m config window_shadow off

# window opacity (default: off)
# example: render all unfocused windows with 90% opacity
yabai -m config window_opacity off
# yabai -m config active_window_opacity 0.93
# yabai -m config normal_window_opacity 0.88

# float system preferences
yabai -m rule --add app="^Audio MIDI Setup$" manage=off
yabai -m rule --add app="^Finder$" manage=off
yabai -m rule --add app="^Calendar$" manage=off
yabai -m rule --add app="^Spark$" manage=off
yabai -m rule --add app="^System Preferences$" manage=off
yabai -m rule --add app="^ミュージック$" manage=off

# https://github.com/koekeishiya/yabai/issues/322#issuecomment-557847511
yabai -m signal --add event=window_created action='yabai -m query --windows --window $YABAI_WINDOW_ID | jq -er ".resizable == 0 and .floating == 0" && yabai -m window $YABAI_WINDOW_ID --toggle float'


# sticky system preferences
yabai -m rule --add app="^Digital Colou?r Meter$" sticky=on
